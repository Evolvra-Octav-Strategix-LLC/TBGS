root@212:/opt/tbgs# bash deploy.sh
ðŸš€ Starting TBGS deployment...
ðŸ“… Sat Sep 13 10:26:11 PM CEST 2025
ðŸ”„ Fetching latest changes from repository...
Fetching origin
HEAD is now at 680efc8 v1.1
ðŸ›‘ Stopping existing containers...
WARN[0000] The "NEXTCLOUD_DB_USER" variable is not set. Defaulting to a blank string. 
WARN[0000] The "NEXTCLOUD_DB_PASSWORD" variable is not set. Defaulting to a blank string. 
WARN[0000] The "PGADMIN_PASSWORD" variable is not set. Defaulting to a blank string. 
WARN[0000] The "PGADMIN_EMAIL" variable is not set. Defaulting to a blank string. 
WARN[0000] The "NEXTCLOUD_HOST" variable is not set. Defaulting to a blank string. 
WARN[0000] The "NEXTCLOUD_DB_USER" variable is not set. Defaulting to a blank string. 
WARN[0000] The "NEXTCLOUD_DB_PASSWORD" variable is not set. Defaulting to a blank string. 
WARN[0000] The "NEXTCLOUD_TRUSTED_DOMAINS" variable is not set. Defaulting to a blank string. 
WARN[0000] The "REDIS_PASSWORD" variable is not set. Defaulting to a blank string. 
WARN[0000] The "REDIS_PASSWORD" variable is not set. Defaulting to a blank string. 
[+] Running 9/9
 âœ” Container tbgs-pgadmin              Removed                                                                                                                                                  0.0s 
 âœ” Container tbgs-nextcloud            Removed                                                                                                                                                  0.0s 
 âœ” Container tbgs-nginx-proxy-manager  Removed                                                                                                                                                  0.0s 
 âœ” Container tbgs-dashy                Removed                                                                                                                                                  0.8s 
 âœ” Container tbgs-portainer            Removed                                                                                                                                                  0.5s 
 âœ” Container tbgs-app                  Removed                                                                                                                                                  0.0s 
 âœ” Container tbgs-postgres             Removed                                                                                                                                                  0.0s 
 âœ” Container tbgs-redis                Removed                                                                                                                                                  0.0s 
 âœ” Network tbgs_tbgs-network           Removed                                                                                                                                                  0.3s 
ðŸ§¹ Cleaning up old images and containers...
Deleted Images:
deleted: sha256:7e8d6cf5778f499972babe0770e20c4508ef7a762cc6c2ddc12435cb5ca72f4c

Deleted build cache objects:
ye0jebidy2dtko8e4qk1ilwia
jgjjtsfz1lpbp1k9bx473pjgz
18z844y4ngsh0dzzo4oedujup
ectoyo96afkrska96csktpfyw
ot5kyeuxs2xvm4aimapunechu
48xb4gtghyxotjl913cx0fjbd
4kti7ogk5qxs0xm2318ll2d1v
dccn1c8x901xx6m0zhtozzjc3

Total reclaimed space: 543.5MB
ðŸ”¨ Building and starting services...
WARN[0000] The "REDIS_PASSWORD" variable is not set. Defaulting to a blank string. 
WARN[0000] The "REDIS_PASSWORD" variable is not set. Defaulting to a blank string. 
WARN[0000] The "NEXTCLOUD_DB_PASSWORD" variable is not set. Defaulting to a blank string. 
WARN[0000] The "NEXTCLOUD_HOST" variable is not set. Defaulting to a blank string. 
WARN[0000] The "NEXTCLOUD_DB_USER" variable is not set. Defaulting to a blank string. 
WARN[0000] The "NEXTCLOUD_TRUSTED_DOMAINS" variable is not set. Defaulting to a blank string. 
WARN[0000] The "NEXTCLOUD_DB_USER" variable is not set. Defaulting to a blank string. 
WARN[0000] The "NEXTCLOUD_DB_PASSWORD" variable is not set. Defaulting to a blank string. 
WARN[0000] The "PGADMIN_EMAIL" variable is not set. Defaulting to a blank string. 
WARN[0000] The "PGADMIN_PASSWORD" variable is not set. Defaulting to a blank string. 
[+] Building 44.2s (20/20) FINISHED                                                                                                                                                                  
 => [internal] load local bake definitions                                                                                                                                                      0.0s
 => => reading from stdin 473B                                                                                                                                                                  0.0s
 => [internal] load build definition from Dockerfile                                                                                                                                            0.0s
 => => transferring dockerfile: 1.61kB                                                                                                                                                          0.0s
 => [internal] load metadata for docker.io/library/node:20-alpine                                                                                                                               0.7s
 => [internal] load .dockerignore                                                                                                                                                               0.0s
 => => transferring context: 545B                                                                                                                                                               0.0s
 => CACHED [builder 1/6] FROM docker.io/library/node:20-alpine@sha256:eabac870db94f7342d6c33560d6613f188bbcf4bbe1f4eb47d5e2a08e1a37722                                                          0.0s
 => [internal] load build context                                                                                                                                                               1.1s
 => => transferring context: 75.14MB                                                                                                                                                            1.1s
 => [builder 2/6] WORKDIR /app                                                                                                                                                                  0.2s
 => [builder 3/6] COPY package*.json ./                                                                                                                                                         0.1s
 => [builder 4/6] RUN npm ci && npm cache clean --force                                                                                                                                        24.7s
 => [builder 5/6] COPY . .                                                                                                                                                                      0.3s 
 => [builder 6/6] RUN npm run build &&     mkdir -p dist/server &&     npx esbuild server/index.ts         --platform=node         --packages=external         --bundle         --format=esm   15.6s 
 => CACHED [production 2/8] RUN apk add --no-cache tini &&     addgroup -g 1001 -S tbgs &&     adduser -S tbgs -u 1001                                                                          0.0s 
 => CACHED [production 3/8] WORKDIR /app                                                                                                                                                        0.0s 
 => CACHED [production 4/8] COPY package*.json ./                                                                                                                                               0.0s 
 => CACHED [production 5/8] RUN npm ci --only=production && npm cache clean --force                                                                                                             0.0s 
 => CACHED [production 6/8] COPY --from=builder /app/dist ./dist                                                                                                                                0.0s 
 => CACHED [production 7/8] COPY --from=builder /app/shared ./shared                                                                                                                            0.0s 
 => CACHED [production 8/8] RUN mkdir -p uploads && chown -R tbgs:tbgs /app                                                                                                                     0.0s
 => exporting to image                                                                                                                                                                          0.0s
 => => exporting layers                                                                                                                                                                         0.0s
 => => writing image sha256:beb1763e55441031380c67422bcc19869d799a017a5edf7a9f9e118a2077e735                                                                                                    0.0s
 => => naming to docker.io/library/tbgs-tbgs-app                                                                                                                                                0.0s
 => resolving provenance for metadata file                                                                                                                                                      0.0s
[+] Running 10/10
 âœ” tbgs-tbgs-app                       Built                                                                                                                                                    0.0s 
 âœ” Network tbgs_tbgs-network           Created                                                                                                                                                  0.2s 
 âœ˜ Container tbgs-redis                Error                                                                                                                                                    2.6s 
 âœ” Container tbgs-portainer            Started                                                                                                                                                  0.8s 
 âœ” Container tbgs-dashy                Started                                                                                                                                                  0.8s 
 âœ” Container tbgs-postgres             Healthy                                                                                                                                                 14.4s 
 âœ” Container tbgs-nextcloud            Started                                                                                                                                                 14.9s 
 âœ” Container tbgs-pgadmin              Started                                                                                                                                                 14.9s 
 âœ” Container tbgs-app                  Created                                                                                                                                                  0.1s 
 âœ” Container tbgs-nginx-proxy-manager  Created                                                                                                                                                  0.0s 
dependency failed to start: container tbgs-redis is unhealthy
root@212:/opt/tbgs# 
